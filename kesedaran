/**
 * Modul EKSA Digital (Edisi 2025)
 * Versi Web (GitHub Codespaces)
 */

import React, { useState, useEffect } from 'react';
import { 
  BookOpen, Target, Recycle, Lightbulb, Users, Clock, 
  ChevronRight, ChevronDown, Home, Award, CheckCircle, 
  XCircle, Play, Pause, RotateCcw, Leaf, Briefcase, 
  Zap, Layout, Search, Trash2, AlertTriangle, FileText,
  ClipboardList, ThumbsUp, ArrowRight, Star, HelpCircle
} from 'lucide-react';

// --- DATA KANDUNGAN (Berdasarkan Slaid) ---

const sevenWastesData = [
  { id: 1, title: "Overproduction", desc: "Menghasilkan lebih daripada permintaan.", icon: <FileText className="text-red-500" /> },
  { id: 2, title: "Waiting", desc: "Menunggu kitaran kerja selesai.", icon: <Clock className="text-orange-500" /> },
  { id: 3, title: "Transportation", desc: "Pergerakan barang yang tidak perlu.", icon: <ArrowRight className="text-blue-500" /> },
  { id: 4, title: "Motion", desc: "Pergerakan pekerja yang tidak perlu.", icon: <Users className="text-purple-500" /> },
  { id: 5, title: "Over Processing", desc: "Proses berulang atau tidak perlu.", icon: <RotateCcw className="text-yellow-500" /> },
  { id: 6, title: "Inventory", desc: "Stok berlebihan (bahan mentah/siap).", icon: <ClipboardList className="text-green-500" /> },
  { id: 7, title: "Defects/Rework", desc: "Kesilapan yang perlu dibaiki semula.", icon: <AlertTriangle className="text-red-600" /> },
];

const scenarioQuizData = [
  {
    id: 1,
    scenario: "Anda menjumpai kerusi patah yang tidak boleh dibaiki lagi di sudut pejabat. Apakah tindakan 'Sisih' yang betul?",
    options: [
      { text: "Letak label 'Rosak' dan biarkan di situ.", isCorrect: false, feedback: "Salah. Barang rosak kekal akan menyemakkan ruang." },
      { text: "Gunakan Tag Merah dan lupuskan segera.", isCorrect: true, feedback: "Tepat! Tag Merah untuk pelupusan barang yang tidak diperlukan/rosak." },
      { text: "Simpan dalam stor 'Manalah Tahu Guna'.", isCorrect: false, feedback: "Salah. Ini menambah pembaziran inventori." }
    ]
  },
  {
    id: 2,
    scenario: "Seorang pelawat OKU datang ke kaunter, tetapi kaunter terlalu tinggi. Elemen EKSA manakah yang kurang dititikberatkan?",
    options: [
      { text: "Amalan Hijau", isCorrect: false, feedback: "Kurang tepat. Ini berkaitan alam sekitar." },
      { text: "Imej Korporat", isCorrect: false, feedback: "Bukan isu utama di sini." },
      { text: "Persekitaran Kondusif", isCorrect: true, feedback: "Betul! Persekitaran kondusif termasuk kemudahan mesra OKU." }
    ]
  },
  {
    id: 3,
    scenario: "Anda ingin menyusun fail di rak. Mengikut amalan 'Susun' (Seiton), berapakah masa sasaran untuk fail itu dicapai?",
    options: [
      { text: "30 Saat", isCorrect: true, feedback: "Tepat! Sasaran pengambilan fail adalah 30 saat." },
      { text: "1 Minit", isCorrect: false, feedback: "Terlalu lama." },
      { text: "5 Minit", isCorrect: false, feedback: "Sangat tidak efisien." }
    ]
  },
  {
    id: 4,
    scenario: "Rakan sekerja menggunakan kotak lama yang dihias cantik untuk menyimpan alat tulis. Ini contoh elemen apa?",
    options: [
      { text: "Kreativiti & Inovasi + Amalan Hijau", isCorrect: true, feedback: "Tepat! Mengitar semula (Hijau) secara kreatif." },
      { text: "Sisih & Susun", isCorrect: false, feedback: "Ia sebahagian daripadanya, tapi elemen utama ialah Kreativiti." },
      { text: "Keselamatan", isCorrect: false, feedback: "Tidak berkaitan secara langsung." }
    ]
  }
];

const flashcardsData = [
  { id: 1, term: "SEIRI (SISIH)", desc: "Asingkan barang perlu & tidak perlu. Gunakan Tag Merah (Lupus) & Tag Kuning (Nilai).", color: "bg-red-600" },
  { id: 2, term: "SEITON (SUSUN)", desc: "Susun barang supaya mudah diambil (30 saat). Guna kaedah FIFO & Label.", color: "bg-blue-600" },
  { id: 3, term: "SEISO (SAPU)", desc: "Bersihkan habuk/kekotoran. Tentukan pemilikan ruang (ownership).", color: "bg-green-600" },
  { id: 4, term: "SEIKETSU (SERAGAM)", desc: "Wujudkan SOP, senarai semak, dan piawaian yang konsisten.", color: "bg-yellow-500" },
  { id: 5, term: "SHITSUKE (SENTIASA AMAL)", desc: "Budaya disiplin, audit kendiri, dan penambahbaikan berterusan.", color: "bg-purple-600" }
];

// --- KOMPONEN UTILITI ---

const SectionTitle = ({ icon: Icon, title, subtitle }) => (
  <div className="mb-6 border-b border-gray-200 pb-4">
    <div className="flex items-center text-blue-700 mb-1">
      <div className="p-2 bg-blue-100 rounded-lg mr-3">
        <Icon size={24} />
      </div>
      <h2 className="text-2xl font-bold">{title}</h2>
    </div>
    {subtitle && <p className="text-gray-500 ml-14">{subtitle}</p>}
  </div>
);

const Card = ({ children, className = "" }) => (
  <div className={`bg-white rounded-xl shadow-sm border border-gray-100 p-6 ${className}`}>
    {children}
  </div>
);

// --- KOMPONEN PERMAINAN & INTERAKTIF ---

const WasteGame = () => {
  const [wastes, setWastes] = useState(sevenWastesData);
  const [score, setScore] = useState(0);
  const [message, setMessage] = useState("Klik pada ikon untuk hapuskan pembaziran (Muda)!");

  const handleClick = (id) => {
    const newWastes = wastes.filter(w => w.id !== id);
    setWastes(newWastes);
    setScore(score + 1);
    setMessage(score + 1 === 7 ? "Tahniah! Semua pembaziran dihapuskan!" : "Teruskan! Hapuskan pembaziran!");
  };

  const resetGame = () => {
    setWastes(sevenWastesData);
    setScore(0);
    setMessage("Klik pada ikon untuk hapuskan pembaziran (Muda)!");
  };

  return (
    <Card className="bg-red-50 border-red-100">
      <div className="flex justify-between items-center mb-4">
        <h3 className="font-bold text-red-800 text-lg flex items-center"><Trash2 className="mr-2"/> Misi: Basmi 7 Pembaziran</h3>
        <span className="bg-white px-3 py-1 rounded-full text-red-600 font-mono font-bold">Skor: {score}/7</span>
      </div>
      <p className="text-center text-gray-700 mb-6 font-medium">{message}</p>
      
      {wastes.length > 0 ? (
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
          {wastes.map((waste) => (
            <button
              key={waste.id}
              onClick={() => handleClick(waste.id)}
              className="bg-white p-4 rounded-lg shadow-sm hover:shadow-md hover:bg-red-100 transition flex flex-col items-center text-center animate-fadeIn"
            >
              <div className="mb-2 p-2 bg-gray-50 rounded-full">{waste.icon}</div>
              <span className="font-bold text-sm text-gray-800">{waste.title}</span>
              <span className="text-xs text-gray-500 mt-1">{waste.desc}</span>
            </button>
          ))}
        </div>
      ) : (
        <div className="text-center py-8">
          <div className="inline-block p-4 bg-green-100 rounded-full text-green-600 mb-4">
            <ThumbsUp size={48} />
          </div>
          <h4 className="text-2xl font-bold text-gray-800 mb-2">Hebat!</h4>
          <p className="text-gray-600 mb-4">Anda telah berjaya menghapuskan semua pembaziran.</p>
          <button onClick={resetGame} className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium">Main Semula</button>
        </div>
      )}
    </Card>
  );
};

const TagFlowSimulation = () => {
  const [step, setStep] = useState(0);

  return (
    <Card className="bg-blue-50 border-blue-100">
      <h3 className="font-bold text-blue-900 mb-4 flex items-center"><ClipboardList className="mr-2"/> Simulasi Alur Kerja SISIH</h3>
      <div className="space-y-4">
        <div className="flex flex-col items-center">
          {/* Visual Flowchart steps */}
          <div className={`p-4 rounded-lg border-2 w-full md:w-2/3 text-center transition-all ${step >= 0 ? 'bg-white border-blue-500 shadow-md' : 'bg-gray-100 border-gray-300 opacity-50'}`}>
            <span className="font-bold block text-lg">Langkah 1: Kenal Pasti</span>
            <span className="text-sm text-gray-600">Asingkan barang rosak, luput, atau berlebihan.</span>
          </div>
          
          {step >= 1 && <ArrowRight className="transform rotate-90 my-2 text-blue-400" />}

          <div className={`p-4 rounded-lg border-2 w-full md:w-2/3 text-center transition-all ${step >= 1 ? 'bg-white border-yellow-500 shadow-md' : 'bg-gray-100 border-gray-300 opacity-50 hidden'}`}>
            <span className="font-bold block text-lg">Langkah 2: Tentukan Tag</span>
            <div className="grid grid-cols-2 gap-4 mt-3">
              <button className="bg-red-100 text-red-700 p-2 rounded border border-red-200 hover:bg-red-200 text-sm font-bold">
                Barang Rosak/Lupus <br/> (Guna Tag Merah)
              </button>
              <button className="bg-yellow-100 text-yellow-700 p-2 rounded border border-yellow-200 hover:bg-yellow-200 text-sm font-bold">
                KIV / Perlu Nilai <br/> (Guna Tag Kuning)
              </button>
            </div>
          </div>
        </div>

        <div className="flex justify-center mt-4">
           <button 
             onClick={() => setStep(step === 0 ? 1 : 0)} 
             className="px-6 py-2 bg-blue-600 text-white rounded-full font-bold hover:bg-blue-700 transition"
           >
             {step === 0 ? "Seterusnya: Pilih Tag" : "Mula Semula"}
           </button>
        </div>
      </div>
    </Card>
  );
};

const FlashCard = ({ data }) => {
  const [isFlipped, setIsFlipped] = useState(false);
  return (
    <div 
      className="perspective-1000 w-full h-48 cursor-pointer group"
      onClick={() => setIsFlipped(!isFlipped)}
    >
      <div className={`relative w-full h-full transition-transform duration-500 transform-style-3d ${isFlipped ? 'rotate-y-180' : ''}`}>
        <div className={`absolute w-full h-full backface-hidden rounded-xl shadow-md flex flex-col items-center justify-center p-6 text-white ${data.color} bg-opacity-90 hover:bg-opacity-100 transition`}>
          <h3 className="text-2xl font-bold mb-2">{data.term}</h3>
          <p className="text-xs uppercase tracking-widest opacity-80">Klik untuk info</p>
        </div>
        <div className="absolute w-full h-full backface-hidden rounded-xl shadow-md flex flex-col items-center justify-center p-6 bg-white border-2 border-gray-100 rotate-y-180 text-center">
          <p className="text-gray-800 font-medium leading-relaxed">{data.desc}</p>
        </div>
      </div>
    </div>
  );
};

const ScenarioQuiz = () => {
  const [current, setCurrent] = useState(0);
  const [answered, setAnswered] = useState(false);
  const [selectedIdx, setSelectedIdx] = useState(null);
  const [feedback, setFeedback] = useState(null);
  const [score, setScore] = useState(0);

  const handleOption = (option, idx) => {
    setAnswered(true);
    setSelectedIdx(idx);
    setFeedback(option.feedback);
    if (option.isCorrect) setScore(score + 1);
  };

  const nextQ = () => {
    if (current < scenarioQuizData.length - 1) {
      setCurrent(current + 1);
      setAnswered(false);
      setSelectedIdx(null);
      setFeedback(null);
    } else {
      setFeedback("Tamat");
    }
  };

  if (feedback === "Tamat") return (
    <Card className="text-center py-10 bg-indigo-50 border-indigo-100">
      <div className="inline-block p-4 bg-white rounded-full shadow-sm mb-4">
        <Award size={40} className="text-indigo-600" />
      </div>
      <h3 className="text-2xl font-bold text-indigo-900 mb-2">Kuiz Tamat!</h3>
      <p className="text-lg text-indigo-700">Markah Anda: <span className="font-bold text-3xl">{score} / {scenarioQuizData.length}</span></p>
      <button onClick={() => { setCurrent(0); setScore(0); setFeedback(null); setAnswered(false); setSelectedIdx(null); }} className="mt-6 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">Cuba Lagi</button>
    </Card>
  );

  const q = scenarioQuizData[current];

  return (
    <div className="bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden">
      <div className="bg-indigo-600 p-4 text-white flex justify-between items-center">
        <h3 className="font-bold text-lg flex items-center"><HelpCircle className="mr-2" size={20} /> Situasi {current + 1}</h3>
        <span className="text-sm bg-indigo-700 px-2 py-1 rounded">Markah: {score}</span>
      </div>
      <div className="p-6">
        <p className="text-lg font-medium text-gray-800 mb-6 leading-relaxed">{q.scenario}</p>
        
        <div className="space-y-3">
          {q.options.map((opt, idx) => (
            <button
              key={idx}
              disabled={answered}
              onClick={() => handleOption(opt, idx)}
              className={`w-full text-left p-4 rounded-lg border transition-all ${
                answered 
                  ? opt.isCorrect 
                    ? 'bg-green-100 border-green-300 text-green-800' 
                    : selectedIdx === idx 
                      ? 'bg-red-100 border-red-300 text-red-800'
                      : 'bg-gray-50 border-gray-200 opacity-60'
                  : 'hover:bg-indigo-50 border-gray-200 hover:border-indigo-300'
              }`}
            >
              <div className="flex items-center">
                 {answered && opt.isCorrect && <CheckCircle className="mr-2 text-green-600" size={18} />}
                 {answered && !opt.isCorrect && selectedIdx === idx && <XCircle className="mr-2 text-red-600" size={18} />}
                 <span>{opt.text}</span>
              </div>
            </button>
          ))}
        </div>

        {answered && (
          <div className={`mt-6 p-4 rounded-lg ${feedback.includes("Tepat") || feedback.includes("Betul") ? 'bg-green-50 text-green-800 border border-green-200' : 'bg-red-50 text-red-800 border border-red-200'}`}>
            <p className="font-bold mb-1">{feedback.includes("Tepat") || feedback.includes("Betul") ? "Syabas!" : "Kurang Tepat."}</p>
            <p className="text-sm">{feedback}</p>
            <button onClick={nextQ} className="mt-3 text-sm font-bold underline">Soalan Seterusnya &rarr;</button>
          </div>
        )}
      </div>
    </div>
  );
};

// --- HALAMAN UTAMA ---

const PageHome = ({ navTo }) => (
  <div className="space-y-8 animate-fadeIn pb-20">
    <div className="bg-gradient-to-r from-blue-700 to-blue-900 rounded-3xl p-8 text-white shadow-xl relative overflow-hidden">
      <div className="absolute top-0 right-0 opacity-10 transform translate-x-10 -translate-y-10">
        <Target size={200} />
      </div>
      <div className="relative z-10">
        <span className="bg-blue-600 text-blue-100 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider mb-3 inline-block">Modul Interaktif</span>
        <h1 className="text-4xl md:text-5xl font-extrabold mb-4 leading-tight">Kursus Kesedaran <br/> <span className="text-yellow-400">EKSA</span></h1>
        <p className="text-blue-100 text-lg max-w-xl mb-6">Ekosistem Kondusif Sektor Awam. Transformasi daripada Amalan 5S ke arah imej korporat dan persekitaran kerja yang lebih kondusif.</p>
        <button onClick={() => navTo('kesedaran')} className="bg-yellow-400 text-blue-900 px-6 py-3 rounded-xl font-bold hover:bg-yellow-300 transition shadow-lg flex items-center">
          Mula Kursus <ArrowRight className="ml-2" size={18} />
        </button>
      </div>
    </div>

    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 px-2">
      {[
        { id: 'kesedaran', label: 'Kesedaran', icon: <Lightbulb />, color: 'bg-orange-500' },
        { id: '5s', label: 'Teknik 5S', icon: <Search />, color: 'bg-green-500' },
        { id: 'elemen', label: 'Elemen Baru', icon: <Zap />, color: 'bg-purple-500' },
        { id: 'aktiviti', label: 'Kuiz & Aktiviti', icon: <Award />, color: 'bg-pink-500' },
      ].map((item) => (
        <button key={item.id} onClick={() => navTo(item.id)} className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition text-center group">
          <div className={`${item.color} w-12 h-12 mx-auto rounded-xl text-white flex items-center justify-center mb-3 shadow-md group-hover:scale-110 transition`}>
            {item.icon}
          </div>
          <span className="font-bold text-gray-700">{item.label}</span>
        </button>
      ))}
    </div>

    <Card>
      <h3 className="font-bold text-gray-800 mb-4 flex items-center"><Star className="text-yellow-500 mr-2"/> Objektif Kursus</h3>
      <ul className="space-y-3">
        {["Menyelaras pengetahuan berkaitan EKSA", "Meningkatkan kecekapan pelaksanaan", "Menyemai budaya kerja positif", "Meningkatkan imej korporat"].map((obj, i) => (
          <li key={i} className="flex items-start text-gray-600 text-sm">
             <CheckCircle className="text-green-500 mr-3 flex-shrink-0" size={16} />
             {obj}
          </li>
        ))}
      </ul>
    </Card>
  </div>
);

// --- HALAMAN KESEDARAN ---

const PageKesedaran = () => (
  <div className="space-y-8 animate-fadeIn pb-20">
    <SectionTitle icon={Lightbulb} title="Kesedaran EKSA" subtitle="Latar Belakang & Kepentingan" />
    
    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
      <Card className="bg-gradient-to-br from-white to-blue-50">
        <h3 className="text-lg font-bold text-blue-800 mb-3">Evolusi: 5S ke EKSA</h3>
        <div className="relative border-l-2 border-blue-200 ml-2 pl-6 space-y-6 py-2">
          <div className="relative">
            <span className="absolute -left-[33px] bg-blue-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center">1</span>
            <h4 className="font-bold text-gray-800">Tahun 80-an (Jepun)</h4>
            <p className="text-sm text-gray-600">Amalan 5S bermula dalam sektor industri Jepun.</p>
          </div>
          <div className="relative">
            <span className="absolute -left-[33px] bg-blue-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center">2</span>
            <h4 className="font-bold text-gray-800">2010 (Malaysia)</h4>
            <p className="text-sm text-gray-600">MAMPU memperkenalkan Panduan Amalan 5S Sektor Awam.</p>
          </div>
          <div className="relative">
            <span className="absolute -left-[33px] bg-green-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center">3</span>
            <h4 className="font-bold text-green-700">Jan 2014 (EKSA)</h4>
            <p className="text-sm text-gray-600">Penjenamaan semula kepada Ekosistem Kondusif Sektor Awam untuk imej yang lebih korporat.</p>
          </div>
        </div>
      </Card>

      <div className="space-y-4">
         <Card className="bg-yellow-50 border-yellow-100">
           <h3 className="font-bold text-yellow-800 mb-2">Kenapa Penjenamaan Semula?</h3>
           <ul className="list-disc list-inside text-sm text-gray-700 space-y-1">
             <li>Elak konsep "One Size Fits All".</li>
             <li>Sesuai dengan pelbagai jenis agensi.</li>
             <li>Menekankan Imej Korporat.</li>
             <li>Elemen Kreativiti & Inovasi.</li>
           </ul>
         </Card>
         
         <Card className="bg-green-50 border-green-100">
           <h3 className="font-bold text-green-800 mb-2">Renungan (Tempat Kerja)</h3>
           <p className="text-sm text-gray-700 italic">"Kita habiskan 8 jam sehari di pejabat. Pejabat adalah rumah kedua. Selesakah anda dengan persekitaran sekarang?"</p>
         </Card>
      </div>
    </div>

    {/* The 7 Wastes Game */}
    <div className="mt-8">
      <h3 className="text-xl font-bold text-gray-800 mb-4 text-center">Aktiviti: Kenali 7 Pembaziran (Muda)</h3>
      <WasteGame />
    </div>
  </div>
);

// --- HALAMAN 5S ---

const Page5S = () => (
  <div className="space-y-8 animate-fadeIn pb-20">
    <SectionTitle icon={Search} title="Teknik Amalan 5S" subtitle="Sisih, Susun, Sapu, Seragam, Sentiasa Amal" />
    
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
      {flashcardsData.map(card => <FlashCard key={card.id} data={card} />)}
    </div>

    <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
      {/* Kolum Kiri: Perincian */}
      <div className="space-y-6">
        <Card>
          <div className="flex items-center mb-3">
             <div className="bg-red-100 p-2 rounded text-red-600 mr-3"><Trash2 size={20}/></div>
             <h3 className="font-bold text-lg">1. SISIH (Seiri)</h3>
          </div>
          <p className="text-sm text-gray-600 mb-4">Proses mengasingkan barang yang diperlukan dan tidak diperlukan.</p>
          <TagFlowSimulation />
        </Card>

        <Card>
          <div className="flex items-center mb-3">
             <div className="bg-blue-100 p-2 rounded text-blue-600 mr-3"><Layout size={20}/></div>
             <h3 className="font-bold text-lg">2. SUSUN (Seiton)</h3>
          </div>
          <ul className="text-sm text-gray-700 space-y-2">
            <li className="flex items-start"><CheckCircle size={16} className="text-blue-500 mr-2 mt-0.5"/> <span><strong>Masa Capaian:</strong> Sasaran 30 saat untuk ambil & simpan.</span></li>
            <li className="flex items-start"><CheckCircle size={16} className="text-blue-500 mr-2 mt-0.5"/> <span><strong>FIFO:</strong> First-In-First-Out untuk stok.</span></li>
            <li className="flex items-start"><CheckCircle size={16} className="text-blue-500 mr-2 mt-0.5"/> <span><strong>Label:</strong> Nama barang, kuantiti, dan penanda aras minima/maksima.</span></li>
          </ul>
        </Card>
      </div>

      {/* Kolum Kanan: Sapu & Seragam */}
      <div className="space-y-6">
         <Card>
          <div className="flex items-center mb-3">
             <div className="bg-green-100 p-2 rounded text-green-600 mr-3"><Leaf size={20}/></div>
             <h3 className="font-bold text-lg">3. SAPU (Seiso)</h3>
          </div>
          <p className="text-sm text-gray-600">Bukan sekadar menyapu, tetapi memeriksa! Habuk boleh merosakkan mesin dan komputer.</p>
          <div className="mt-3 bg-gray-50 p-3 rounded text-sm border border-gray-100">
            <strong>Tips:</strong> Buat jadual "Ownership" (Hak Milik). Setiap staf bertanggungjawab ke atas zon masing-masing (contoh: Zon A - Ali).
          </div>
        </Card>

        <Card>
          <div className="flex items-center mb-3">
             <div className="bg-yellow-100 p-2 rounded text-yellow-600 mr-3"><FileText size={20}/></div>
             <h3 className="font-bold text-lg">4. SERAGAM (Seiketsu)</h3>
          </div>
          <p className="text-sm text-gray-600">Kekalkan 3S pertama dengan piawaian.</p>
          <ul className="text-sm text-gray-700 mt-2 list-disc list-inside">
             <li>SOP Kebersihan</li>
             <li>Kod warna untuk fail/zon</li>
             <li>Etika penggunaan pantri</li>
          </ul>
        </Card>
      </div>
    </div>
  </div>
);

// --- HALAMAN ELEMEN BARU ---

const PageElemen = () => (
  <div className="space-y-8 animate-fadeIn pb-20">
    <SectionTitle icon={Zap} title="Elemen Baharu EKSA" subtitle="Nilai tambah kepada 5S konvensional" />

    <div className="space-y-6">
      {/* Imej Korporat */}
      <div className="bg-white rounded-xl shadow-sm border-l-4 border-indigo-500 p-6 flex flex-col md:flex-row gap-6">
        <div className="flex-shrink-0 flex flex-col items-center justify-center md:w-32">
           <Briefcase size={48} className="text-indigo-500 mb-2" />
           <span className="font-bold text-indigo-700 text-center">Imej Korporat</span>
        </div>
        <div>
           <p className="text-gray-700 mb-3">Identiti dan persepsi pelanggan terhadap organisasi. Tidak boleh kelihatan seperti bengkel, tetapi mesti kelihatan profesional.</p>
           <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm">
             <div className="bg-indigo-50 p-3 rounded text-indigo-800">✅ Keselamatan diutamakan (Laluan kecemasan jelas).</div>
             <div className="bg-indigo-50 p-3 rounded text-indigo-800">✅ Etika pakaian dan komunikasi seragam.</div>
           </div>
        </div>
      </div>

      {/* Kreativiti & Inovasi */}
      <div className="bg-white rounded-xl shadow-sm border-l-4 border-orange-500 p-6 flex flex-col md:flex-row gap-6">
        <div className="flex-shrink-0 flex flex-col items-center justify-center md:w-32">
           <Lightbulb size={48} className="text-orange-500 mb-2" />
           <span className="font-bold text-orange-700 text-center">Kreativiti</span>
        </div>
        <div>
           <p className="text-gray-700 mb-3">Berfikir di luar kotak. Bukan sekadar hiasan mahal, tetapi penyelesaian bijak menggunakan bahan kos rendah.</p>
           <div className="p-3 bg-orange-50 rounded border border-orange-100 text-sm text-gray-800 italic">
             "Contoh: Menggunakan kotak terpakai untuk membuat divider laci, atau botol plastik untuk pasu hiasan."
           </div>
        </div>
      </div>

      {/* Amalan Hijau */}
      <div className="bg-white rounded-xl shadow-sm border-l-4 border-green-500 p-6 flex flex-col md:flex-row gap-6">
        <div className="flex-shrink-0 flex flex-col items-center justify-center md:w-32">
           <Leaf size={48} className="text-green-500 mb-2" />
           <span className="font-bold text-green-700 text-center">Go Green</span>
        </div>
        <div>
           <p className="text-gray-700 mb-3">Kecekapan tenaga dan kitar semula. Melaksanakan program penjimatan sumber.</p>
           <ul className="grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-700">
             <li className="flex items-center"><CheckCircle size={14} className="text-green-500 mr-2"/> Suhu Aircond 24°C</li>
             <li className="flex items-center"><CheckCircle size={14} className="text-green-500 mr-2"/> Kitar Semula Kertas</li>
             <li className="flex items-center"><CheckCircle size={14} className="text-green-500 mr-2"/> Jimat Elektrik/Air</li>
             <li className="flex items-center"><CheckCircle size={14} className="text-green-500 mr-2"/> Penggunaan Pokok Hidup</li>
           </ul>
        </div>
      </div>
    </div>
  </div>
);

// --- HALAMAN AKTIVITI ---

const PageAktiviti = () => {
  const [timer, setTimer] = useState(300);
  const [isActive, setIsActive] = useState(false);

  useEffect(() => {
    let interval = null;
    if (isActive && timer > 0) {
      interval = setInterval(() => setTimer(t => t - 1), 1000);
    } else if (timer === 0) setIsActive(false);
    return () => clearInterval(interval);
  }, [isActive, timer]);

  const formatTime = (seconds) => {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
  };

  return (
    <div className="space-y-8 animate-fadeIn pb-20">
      <SectionTitle icon={Award} title="Zon Aktiviti" subtitle="Uji kefahaman & Praktikal" />
      
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
        {/* Kuiz Senario */}
        <div>
          <h3 className="font-bold text-gray-800 mb-4 text-lg">1. Uji Minda: Situasi Sebenar</h3>
          <ScenarioQuiz />
        </div>

        {/* Pemasa Aktiviti */}
        <div>
          <h3 className="font-bold text-gray-800 mb-4 text-lg">2. Cabaran 5 Minit</h3>
          <Card className="text-center bg-gray-900 text-white border-none">
            <Clock size={40} className="mx-auto text-yellow-400 mb-4" />
            <h4 className="text-xl font-bold mb-2">"Gotong-Royong Pantas"</h4>
            <p className="text-gray-400 text-sm mb-6">Tetapkan masa 5 minit untuk menyisih laci meja atau desktop komputer anda sekarang.</p>
            
            <div className="text-6xl font-mono font-bold text-white mb-8 tracking-widest">
              {formatTime(timer)}
            </div>
            
            <div className="flex justify-center gap-4">
              <button onClick={() => setIsActive(!isActive)} className={`px-6 py-3 rounded-full font-bold flex items-center ${isActive ? 'bg-red-500 hover:bg-red-600' : 'bg-green-500 hover:bg-green-600'} transition`}>
                {isActive ? <><Pause className="mr-2"/> Jeda</> : <><Play className="mr-2"/> Mula</>}
              </button>
              <button onClick={() => { setIsActive(false); setTimer(300); }} className="px-6 py-3 rounded-full font-bold bg-gray-700 hover:bg-gray-600 flex items-center transition">
                <RotateCcw className="mr-2"/> Reset
              </button>
            </div>
          </Card>
        </div>
      </div>
    </div>
  );
};

// --- APP SHELL ---

const App = () => {
  const [activeTab, setActiveTab] = useState('home');

  const renderContent = () => {
    switch (activeTab) {
      case 'home': return <PageHome navTo={setActiveTab} />;
      case 'kesedaran': return <PageKesedaran />;
      case '5s': return <Page5S />;
      case 'elemen': return <PageElemen />;
      case 'aktiviti': return <PageAktiviti />;
      default: return <PageHome navTo={setActiveTab} />;
    }
  };

  const navItems = [
    { id: 'home', label: 'Utama', icon: Home },
    { id: 'kesedaran', label: 'Kesedaran', icon: Lightbulb },
    { id: '5s', label: 'Amalan 5S', icon: Search },
    { id: 'elemen', label: 'Elemen', icon: Zap },
    { id: 'aktiviti', label: 'Aktiviti', icon: Award },
  ];

  return (
    <div className="min-h-screen bg-gray-50 font-sans text-gray-900 pb-16 md:pb-0">
      <header className="bg-white border-b border-gray-200 sticky top-0 z-40 px-4 py-3 shadow-sm">
        <div className="max-w-5xl mx-auto flex justify-between items-center">
          <div className="flex items-center gap-2">
            <div className="bg-blue-700 p-2 rounded-lg text-white">
              <Layout size={20} />
            </div>
            <h1 className="font-bold text-lg text-gray-800 tracking-tight">EKSA <span className="text-blue-600">Digital</span></h1>
          </div>
          <div className="text-xs font-semibold text-gray-500 bg-gray-100 px-3 py-1 rounded-full border border-gray-200">
            Edisi 2025
          </div>
        </div>
      </header>

      <main className="max-w-5xl mx-auto p-4 md:p-6 min-h-[85vh]">
        {renderContent()}
      </main>

      {/* Mobile Bottom Nav */}
      <nav className="fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 shadow-lg z-50 md:hidden">
        <div className="flex justify-around items-center h-16">
          {navItems.map((item) => (
            <button
              key={item.id}
              onClick={() => setActiveTab(item.id)}
              className={`flex flex-col items-center justify-center w-full h-full px-1 ${activeTab === item.id ? 'text-blue-600' : 'text-gray-400'}`}
            >
              <item.icon size={22} className={activeTab === item.id ? 'mb-1' : ''} />
              <span className="text-[10px] font-medium">{item.label}</span>
            </button>
          ))}
        </div>
      </nav>

      <style>{`
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn { animation: fadeIn 0.4s ease-out forwards; }
      `}</style>
    </div>
  );
};

export default App;
